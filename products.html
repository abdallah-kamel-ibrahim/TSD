<div id="productList"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBZcTVzgVnM2Q9C0DelAKmqcUjsPq8zh58",
  authDomain: "totalsolutiondiagnostic-ffe97.firebaseapp.com",
  projectId: "totalsolutiondiagnostic-ffe97",
  storageBucket: "totalsolutiondiagnostic-ffe97.firebasestorage.app",
  messagingSenderId: "850936511386",
  appId: "1:850936511386:web:11f3ac64e16d8ec49c9823"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const list = document.getElementById("productList");

async function loadProducts(){
  list.innerHTML="";
  const snapshot=await getDocs(collection(db,"products"));
  snapshot.forEach(docSnap=>{
    const data=docSnap.data(); const id=docSnap.id;
    list.innerHTML+=`
      <div class="product-card" onclick="viewProduct('${id}')">
        <img src="${data.image}" alt="${data.name}">
        <h3>${data.name}</h3>
        <p>${data.price}</p>
      </div>
    `;
  });
}

window.viewProduct = function(id){ window.location = `product.html?id=${id}`; }
loadProducts();
</script>
